{"ast":null,"code":"export default {\n  name: 'JobLevelMana',\n\n  data() {\n    return {\n      multipleSelection: [],\n      updateJl: {\n        name: '',\n        titleLevel: '',\n        enabled: false\n      },\n      dialogVisible: false,\n      jl: {\n        name: '',\n        titleLevel: ''\n      },\n      titleLevels: ['正高级', '副高级', '中级', '初级', '员级'],\n      jls: []\n    };\n  },\n\n  mounted() {\n    this.initJls();\n  },\n\n  methods: {\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n\n    deleteMany() {\n      this.$confirm('是否删除选中职位, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const posid = this.multipleSelection;\n        this.deleteRequest('/system/basic/joblevels', posid).then(resp => {\n          if (resp) {\n            this.initJls();\n          }\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n\n    doUpdate() {\n      this.putRequest('/system/basic/joblevel', this.updateJl).then(resp => {\n        if (resp) {\n          this.initJls();\n          this.dialogVisible = false;\n        }\n      });\n    },\n\n    showEditView(index, data) {\n      data.enabled = data.enabled == 1 ? true : false;\n      Object.assign(this.updateJl, data);\n      this.dialogVisible = true;\n    },\n\n    handleDelete(index, data) {\n      this.$confirm('是否删除[' + data.name + '], 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteRequest('/system/basic/joblevel', data).then(resp => {\n          if (resp) {\n            this.initJls();\n          }\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n\n    addJobLevel() {\n      if (this.jl.name && this.jl.titleLevel) {\n        this.postRequest('/system/basic/joblevel', this.jl).then(resp => {\n          if (resp) {\n            this.initJls();\n            this.jl.name = '';\n            this.jl.titleLevel = '';\n          }\n        });\n      } else {\n        this.$message.error('字段不能为空！');\n      }\n    },\n\n    initJls() {\n      this.getRequest('/system/basic/joblevel').then(resp => {\n        if (resp) {\n          this.jls = resp;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAuHA;EACAA,oBADA;;EAEAC;IACA;MACAC,qBADA;MAEAC;QACAH,QADA;QAEAI,cAFA;QAGAC;MAHA,CAFA;MAOAC,oBAPA;MAQAC;QACAP,QADA;QAEAI;MAFA,CARA;MAYAI,cACA,KADA,EAEA,KAFA,EAGA,IAHA,EAIA,IAJA,EAKA,IALA,CAZA;MAmBAC;IAnBA;EAqBA,CAxBA;;EAyBAC;IACA;EACA,CA3BA;;EA4BAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAIAC,IAJA,CAIA;QACA;QACA;UACA;YACA;UACA;QACA,CAJA;MAKA,CAXA,EAWAC,KAXA,CAWA;QACA;UACAF,YADA;UAEAG;QAFA;MAIA,CAhBA;IAiBA,CAtBA;;IAuBAC;MACA;QACA;UACA;UACA;QACA;MACA,CALA;IAMA,CA9BA;;IA+BAC;MACApB;MACAqB;MACA;IACA,CAnCA;;IAoCAC;MACA;QACAT,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAIAC,IAJA,CAIA;QACA;UACA;YACA;UACA;QACA,CAJA;MAKA,CAVA,EAUAC,KAVA,CAUA;QACA;UACAF,YADA;UAEAG;QAFA;MAIA,CAfA;IAgBA,CArDA;;IAsDAK;MACA;QACA;UACA;YACA;YACA;YACA;UACA;QACA,CANA;MAOA,CARA,MAQA;QACA;MACA;IACA,CAlEA;;IAmEAC;MACA;QACA;UACA;QACA;MACA,CAJA;IAKA;;EAzEA;AA5BA","names":["name","data","multipleSelection","updateJl","titleLevel","enabled","dialogVisible","jl","titleLevels","jls","mounted","methods","handleSelectionChange","deleteMany","confirmButtonText","cancelButtonText","type","then","catch","message","doUpdate","showEditView","Object","handleDelete","addJobLevel","initJls"],"sourceRoot":"src/components/sys/basic","sources":["JobLevelMana.vue"],"sourcesContent":["<template lang=\"\">\r\n    <div>\r\n        <div>\r\n            <el-input size=\"small\" v-model=\"jl.name\" placeholder=\"请输入职称\" prefix-icon=\"el-icon-plus\" style=\"width:300px;\"></el-input>\r\n            <el-select size=\"small\" style=\"margin-left: 6px; margin-right: 6px;\" v-model=\"jl.titleLevel\" placeholder=\"请选择职称等级\">\r\n                <el-option\r\n                  v-for=\"item in titleLevels\"\r\n                  :key=\"item\"\r\n                  :label=\"item\"\r\n                  :value=\"item\">\r\n                </el-option>\r\n              </el-select>\r\n              <el-button type=\"primary\" size=\"small\" icon=\"el-icon-plus\" @click=\"addJobLevel\">添加</el-button>\r\n        </div>\r\n        <div style=\"margin-top: 10px;\">\r\n            <el-table\r\n            @selection-change=\"handleSelectionChange\"\r\n            size=\"small\"\r\n            :data=\"jls\"\r\n            stripe\r\n            style=\"width: 75%\">\r\n            <el-table-column\r\n                type=\"selection\"\r\n                width=\"55\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"id\"\r\n              label=\"编号\"\r\n              width=\"55\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"name\"\r\n              label=\"职称名\"\r\n              width=\"150\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"titleLevel\"\r\n              label=\"职称等级\"\r\n              width=\"150\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"createDate\"\r\n              label=\"创建日期\"\r\n              width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"enabled\"\r\n              label=\"是否启用\"\r\n              width=\"150\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-tag v-if=\"scope.row.enabled == 1\" type=\"success\" >已启用</el-tag>\r\n                    <el-tag v-else type=\"danger\" size=\"normal\"  >未启用</el-tag>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"操作\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  size=\"mini\"\r\n                  @click=\"showEditView(scope.$index, scope.row)\">编辑</el-button>\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        <el-button size=\"small\" style=\"margin-top: 8px;\" type=\"danger\" :disabled=\"this.multipleSelection.length == 0\" @click=\"deleteMany\">批量删除</el-button>\r\n        <el-dialog\r\n            title=\"编辑职称\"\r\n            :visible.sync=\"dialogVisible\"\r\n            width=\"30%\">\r\n            <table>\r\n                <tr>\r\n                    <td>\r\n                        <el-tag>职称名称</el-tag>\r\n                    </td>\r\n                    <td>\r\n                        <el-input v-model=\"updateJl.name\" size=\"small\" style=\"margin-left: 6px;\"></el-input>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        <el-tag>职称等级</el-tag>\r\n                    </td>\r\n                    <td>\r\n                        <el-select size=\"small\" style=\"margin-left: 6px; margin-right: 6px;\" v-model=\"updateJl.titleLevel\" placeholder=\"请选择职称等级\">\r\n                            <el-option\r\n                              v-for=\"item in titleLevels\"\r\n                              :key=\"item\"\r\n                              :label=\"item\"\r\n                              :value=\"item\">\r\n                            </el-option>\r\n                          </el-select>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        <el-tag>是否启用</el-tag>\r\n                    </td>\r\n                    <td>\r\n                        <el-switch\r\n                        v-model=\"updateJl.enabled\"\r\n                        active-text=\"已启用\"\r\n                        inactive-text=\"未启用\"\r\n                        style=\"margin-left:6px;\">\r\n                      </el-switch>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button size=\"small\" @click=\"dialogVisible = false\">取 消</el-button>\r\n            <el-button size=\"small\" type=\"primary\" @click=\"doUpdate\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'JobLevelMana',\r\n    data() {\r\n        return {\r\n            multipleSelection: [],\r\n            updateJl: {\r\n                name: '',\r\n                titleLevel: '',\r\n                enabled: false\r\n            },\r\n            dialogVisible: false,\r\n            jl: {\r\n                name: '',\r\n                titleLevel: '',\r\n            },\r\n            titleLevels: [\r\n                '正高级',\r\n                '副高级',\r\n                '中级',\r\n                '初级',\r\n                '员级',\r\n            ],\r\n            jls: []\r\n        }\r\n    },\r\n    mounted() {\r\n        this.initJls()\r\n    },  \r\n    methods: {\r\n        handleSelectionChange(val) {\r\n            this.multipleSelection = val;\r\n        },\r\n        deleteMany() {\r\n            this.$confirm('是否删除选中职位, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                const posid = this.multipleSelection\r\n                this.deleteRequest('/system/basic/joblevels', posid).then(resp => {\r\n                    if (resp) {\r\n                        this.initJls()\r\n                    }\r\n                })\r\n            }).catch(() => {\r\n            this.$message({\r\n                type: 'info',\r\n                message: '已取消删除'\r\n            })          \r\n            })\r\n        },  \r\n        doUpdate() {\r\n            this.putRequest('/system/basic/joblevel', this.updateJl).then(resp => {\r\n                if (resp) {\r\n                    this.initJls()\r\n                    this.dialogVisible = false\r\n                }\r\n            })\r\n        },\r\n        showEditView(index, data) {\r\n            data.enabled = data.enabled == 1 ? true : false\r\n            Object.assign(this.updateJl, data)\r\n            this.dialogVisible = true;\r\n        },  \r\n        handleDelete(index, data){\r\n            this.$confirm('是否删除['+data.name+'], 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.deleteRequest('/system/basic/joblevel', data).then(resp => {\r\n                    if (resp) {\r\n                        this.initJls()\r\n                    }\r\n                })\r\n            }).catch(() => {\r\n            this.$message({\r\n                type: 'info',\r\n                message: '已取消删除'\r\n            })\r\n            })\r\n        },\r\n        addJobLevel() {\r\n            if (this.jl.name && this.jl.titleLevel) {\r\n                this.postRequest('/system/basic/joblevel', this.jl).then(resp => {\r\n                    if (resp) {\r\n                        this.initJls()\r\n                        this.jl.name = ''\r\n                        this.jl.titleLevel = ''\r\n                    }\r\n                })\r\n            }else {\r\n                this.$message.error('字段不能为空！')\r\n            }\r\n        },\r\n        initJls() {\r\n            this.getRequest('/system/basic/joblevel').then(resp => {\r\n                if (resp) {\r\n                    this.jls = resp\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n    \r\n</style>"]},"metadata":{},"sourceType":"module"}