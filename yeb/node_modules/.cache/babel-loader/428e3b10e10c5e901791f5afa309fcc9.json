{"ast":null,"code":"export default {\n  name: 'PosMana',\n\n  data() {\n    return {\n      dialogVisible: false,\n      pos: {\n        name: ''\n      },\n      updatePos: {\n        name: ''\n      },\n      positions: [],\n      multipleSelection: []\n    };\n  },\n\n  mounted() {\n    this.initPositions();\n  },\n\n  methods: {\n    deleteMany() {\n      this.$confirm('是否删除选中职位, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const posid = this.multipleSelection;\n        this.deleteRequest('/system/basic/posd', posid).then(resp => {\n          if (resp) {\n            this.initPositions();\n          }\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n\n    doUpdate() {\n      this.putRequest('/system/basic/pos', this.updatePos).then(resp => {\n        if (resp) {\n          this.initPositions();\n          this.dialogVisible = false;\n        }\n      });\n    },\n\n    addPosition() {\n      if (this.pos.name) {\n        this.postRequest('/system/basic/pos', this.pos).then(resp => {\n          if (resp) {\n            this.initPositions();\n            this.pos.name = '';\n          }\n        });\n      } else {\n        this.$message.error('职位名称不能为空！');\n      }\n    },\n\n    showEditView(index, data) {\n      Object.assign(this.updatePos, data);\n      this.dialogVisible = true;\n    },\n\n    handleDelete(idnex, data) {\n      this.$confirm('是否删除[' + data.name + '], 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteRequest('/system/basic/pos', data).then(resp => {\n          if (resp) {\n            this.initPositions();\n          }\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n\n    initPositions() {\n      this.getRequest('/system/basic/pos').then(resp => {\n        if (resp) {\n          this.positions = resp;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA2EA;EACAA,eADA;;EAEAC;IACA;MACAC,oBADA;MAEAC;QACAH;MADA,CAFA;MAKAI;QACAJ;MADA,CALA;MAQAK,aARA;MASAC;IATA;EAWA,CAdA;;EAeAC;IACA;EACA,CAjBA;;EAkBAC;IACAC;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAIAC,IAJA,CAIA;QACA;QACA;UACA;YACA;UACA;QACA,CAJA;MAKA,CAXA,EAWAC,KAXA,CAWA;QACA;UACAF,YADA;UAEAG;QAFA;MAIA,CAhBA;IAiBA,CAnBA;;IAoBAC;MACA;IACA,CAtBA;;IAuBAC;MACA;QACA;UACA;UACA;QACA;MACA,CALA;IAMA,CA9BA;;IA+BAC;MACA;QACA;UACA;YACA;YACA;UACA;QACA,CALA;MAMA,CAPA,MAOA;QACA;MACA;IACA,CA1CA;;IA4CAC;MACAC;MACA;IACA,CA/CA;;IAgDAC;MACA;QACAX,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAIAC,IAJA,CAIA;QACA;UACA;YACA;UACA;QACA,CAJA;MAKA,CAVA,EAUAC,KAVA,CAUA;QACA;UACAF,YADA;UAEAG;QAFA;MAIA,CAfA;IAgBA,CAjEA;;IAmEAO;MACA;QACA;UACA;QACA;MACA,CAJA;IAKA;;EAzEA;AAlBA","names":["name","data","dialogVisible","pos","updatePos","positions","multipleSelection","mounted","methods","deleteMany","confirmButtonText","cancelButtonText","type","then","catch","message","handleSelectionChange","doUpdate","addPosition","showEditView","Object","handleDelete","initPositions"],"sourceRoot":"src/components/sys/basic","sources":["PosMana.vue"],"sourcesContent":["<template lang=\"\">\r\n    <div>\r\n        <div>\r\n            <el-input\r\n                size=\"small\"\r\n                class=\"addPosInput\"\r\n                placeholder=\"请添加职位\"\r\n                suffix-icon=\"el-icon-plus\"\r\n                @keydown.enter.native=\"addPosition\"\r\n                v-model=\"pos.name\">\r\n            </el-input>\r\n            <el-button icon=\"el-icon-plus\" size=\"small\" type=\"primary\" @click=\"addPosition\">添加</el-button>\r\n        </div>\r\n        <div>\r\n            <el-table\r\n                @selection-change=\"handleSelectionChange\"\r\n                stripe\r\n                size=\"small\"\r\n                :data=\"positions\"\r\n                style=\"width: 70%\">\r\n            <el-table-column\r\n                type=\"selection\"\r\n                width=\"55\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"id\"\r\n                label=\"编号\"\r\n                width=\"55\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"name\"\r\n                label=\"职位\"\r\n                width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"createDate\"\r\n                label=\"创建时间\"\r\n                width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"enabled\"\r\n                label=\"是否启用\"\r\n                width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n            <el-button\r\n              size=\"mini\"\r\n              @click=\"showEditView(scope.$index, scope.row)\">编辑</el-button>\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n            </template>\r\n        </el-table-column>\r\n        </el-table>\r\n        </div>\r\n        <el-button size=\"small\" style=\"margin-top: 8px;\" type=\"danger\" :disabled=\"this.multipleSelection.length == 0\" @click=\"deleteMany\">批量删除</el-button>\r\n        <el-dialog\r\n            title=\"编辑职位\"\r\n            :visible.sync=\"dialogVisible\"\r\n            width=\"30%\">\r\n            <div>\r\n                <el-tag>职位名称</el-tag>\r\n                <el-input v-model=\"updatePos.name\" class=\"updatePosInput\" size=\"small\"></el-input>\r\n            </div>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button size=\"small\" @click=\"dialogVisible = false\">取 消</el-button>\r\n            <el-button size=\"small\" type=\"primary\" @click=\"doUpdate\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'PosMana',\r\n    data() {\r\n        return {\r\n            dialogVisible: false,\r\n            pos: {\r\n                name: ''\r\n            },\r\n            updatePos: {\r\n                name: ''\r\n            },\r\n            positions: [],\r\n            multipleSelection: [],\r\n        }\r\n    },\r\n    mounted() {\r\n        this.initPositions()\r\n    },\r\n    methods: {\r\n        deleteMany() {\r\n            this.$confirm('是否删除选中职位, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                const posid = this.multipleSelection\r\n                this.deleteRequest('/system/basic/posd', posid).then(resp => {\r\n                    if (resp) {\r\n                        this.initPositions()\r\n                    }\r\n                })\r\n            }).catch(() => {\r\n            this.$message({\r\n                type: 'info',\r\n                message: '已取消删除'\r\n            })          \r\n            })\r\n        },  \r\n        handleSelectionChange(val) {\r\n            this.multipleSelection = val;\r\n        },\r\n        doUpdate() {\r\n            this.putRequest('/system/basic/pos', this.updatePos).then(resp => {\r\n                if (resp) {\r\n                    this.initPositions()\r\n                    this.dialogVisible = false\r\n                }\r\n            })\r\n        },  \r\n        addPosition() {\r\n            if (this.pos.name) {\r\n                this.postRequest('/system/basic/pos', this.pos).then(resp => {\r\n                    if (resp) {\r\n                        this.initPositions()\r\n                        this.pos.name = ''\r\n                    }\r\n                })\r\n            } else {\r\n                this.$message.error('职位名称不能为空！')\r\n            }\r\n        },\r\n\r\n        showEditView(index, data) {\r\n            Object.assign(this.updatePos, data)\r\n            this.dialogVisible = true\r\n        },\r\n        handleDelete(idnex, data) {\r\n            this.$confirm('是否删除['+data.name+'], 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.deleteRequest('/system/basic/pos', data).then(resp => {\r\n                    if (resp) {\r\n                        this.initPositions()\r\n                    }\r\n                })\r\n            }).catch(() => {\r\n            this.$message({\r\n                type: 'info',\r\n                message: '已取消删除'\r\n            })      \r\n            })\r\n        },\r\n\r\n        initPositions() {\r\n            this.getRequest('/system/basic/pos').then(resp => {\r\n                if (resp) {\r\n                    this.positions = resp\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n    .addPosInput {\r\n        width: 300px;\r\n        margin-right: 8px;\r\n        margin-bottom: 10px;\r\n    }\r\n\r\n    .updatePosInput {\r\n        width: 200px;\r\n        margin-left: 8px;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module"}