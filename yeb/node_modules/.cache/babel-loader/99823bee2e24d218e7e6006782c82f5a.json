{"ast":null,"code":"export default {\n  name: 'SalSobCfg',\n\n  data() {\n    return {\n      emps: [],\n      currentPage: 1,\n      size: 10,\n      total: 0,\n      salaries: [],\n      currentSalary: null\n    };\n  },\n\n  mounted() {\n    this.initEmps();\n    this.initSalaries();\n  },\n\n  methods: {\n    hidePop(data) {\n      let temp = new Object();\n      temp.id = data.id;\n      temp.salaryId = data.sid;\n      console.log(this.currentSalary.id, '?', data.sid);\n\n      if (this.currentSalary && this.currentSalary.id != data.sid) {\n        this.putRequest('/salary/sobcfg', temp).then(resp => {\n          if (resp) {\n            this.initEmps();\n          }\n        });\n      }\n    },\n\n    showPop(data) {\n      if (data) {\n        let cuSalary = new Object();\n        cuSalary.name = data.sname;\n        cuSalary.id = data.id;\n        this.currentSalary = cuSalary;\n      } else {\n        this.currentSalary = null;\n      }\n    },\n\n    initSalaries() {\n      this.getRequest('/salary/sob').then(resp => {\n        if (resp) {\n          this.salaries = resp;\n        }\n      });\n    },\n\n    sizeChange(size) {\n      this.size = size;\n      this.initEmps();\n    },\n\n    currentChange(page) {\n      this.currentPage = page;\n      this.initEmps();\n    },\n\n    initEmps() {\n      this.getRequest('/salary/sobcfg?currentPage=' + this.currentPage + '&size=' + this.size).then(resp => {\n        if (resp) {\n          this.emps = resp.data;\n          this.total = resp.total;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA6HA;EACAA,iBADA;;EAEAC;IACA;MACAC,QADA;MAEAC,cAFA;MAGAC,QAHA;MAIAC,QAJA;MAKAC,YALA;MAMAC;IANA;EAQA,CAXA;;EAYAC;IACA;IACA;EACA,CAfA;;EAgBAC;IACAC;MACA;MACAC;MACAA;MACAC;;MACA;QACA;UACA;YACA;UACA;QACA,CAJA;MAKA;IACA,CAbA;;IAcAC;MACA;QACA;QACAC;QACAA;QACA;MACA,CALA,MAKA;QACA;MACA;IACA,CAvBA;;IAwBAC;MACA;QACA;UACA;QACA;MACA,CAJA;IAKA,CA9BA;;IA+BAC;MACA;MACA;IACA,CAlCA;;IAmCAC;MACA;MACA;IACA,CAtCA;;IAuCAC;MACA;QACA;UACA;UACA;QACA;MACA,CALA;IAMA;;EA9CA;AAhBA","names":["name","data","emps","currentPage","size","total","salaries","currentSalary","mounted","methods","hidePop","temp","console","showPop","cuSalary","initSalaries","sizeChange","currentChange","initEmps"],"sourceRoot":"src/views/sal","sources":["SalSobCfg.vue"],"sourcesContent":["<template lang=\"\">\r\n    <div>\r\n        <el-table :data=\"emps\" border stripe>\r\n            <el-table-column\r\n              type=\"selection\"\r\n              width=\"40\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"name\"\r\n                label=\"姓名\"\r\n                fixed\r\n                align=\"center\"\r\n                width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"workID\"\r\n                label=\"工号\"\r\n                width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"email\"\r\n                label=\"邮箱地址\"\r\n                width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"phone\"\r\n                label=\"电话号码\"\r\n                width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"pname\"\r\n                label=\"职位\"\r\n                align=\"center\"\r\n                width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                label=\"工资账套\"\r\n                align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-tooltip placement=\"right\" v-if=\"scope.row.sname\">\r\n                        <div slot=\"content\">\r\n                            <table>\r\n                                <tr>\r\n                                    <td>基本工资</td>\r\n                                    <td>{{ scope.row.sbasicSalary }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>交通补助</td>\r\n                                    <td>{{ scope.row.strafficaSalary }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>午餐补助</td>\r\n                                    <td>{{ scope.row.slunchSalary }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>奖金</td>\r\n                                    <td>{{ scope.row.sbonus }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>养老金比率</td>\r\n                                    <td>{{ scope.row.spensionPer }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>养老金基数</td>\r\n                                    <td>{{ scope.row.spensionBase }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>医疗保险比率</td>\r\n                                    <td>{{ scope.row.smedicalPer }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>医疗保险基数</td>\r\n                                    <td>{{ scope.row.smedicalBase }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>公积金比率</td>\r\n                                    <td>{{ scope.row.saccumulationPer }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>公积金基数</td>\r\n                                    <td>{{ scope.row.saccumulationFundBase }}</td>\r\n                                </tr>\r\n                            </table>\r\n                        </div>\r\n                        <el-tag>{{ scope.row.sname}}</el-tag>\r\n                    </el-tooltip>\r\n                    <el-tag v-else>暂未设置</el-tag></el-tag>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-popover\r\n                        placement=\"left\"\r\n                        title=\"编辑工资账套\"\r\n                        width=\"200\"\r\n                        @show=\"showPop(scope.row)\"\r\n                        @hide=\"hidePop(scope.row)\"\r\n                        trigger=\"click\">\r\n                        <div>\r\n                            <el-select v-model=\"currentSalary\" placeholder=\"请选择\" >\r\n                                <el-option v-for=\"item in salaries\"\r\n                                    :key=\"item.id\"\r\n                                    :label=\"item.name\"\r\n                                    :value=\"item.id\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </div>\r\n                        <el-button slot=\"reference\" type=\"danger\" size=\"small\">修改工资账套</el-button>\r\n                    </el-popover>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <div style=\"display: flex; justify-content: flex-end; margin-top: 5px;\">\r\n            <el-pagination\r\n                background\r\n                @size-change=\"sizeChange\"\r\n                @current-change=\"currentChange\"\r\n                layout=\"sizes, prev, pager, next, jumper, ->, total, slot\"\r\n                :total=\"total\">\r\n          </el-pagination>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'SalSobCfg',\r\n    data() {\r\n        return {\r\n            emps: [],\r\n            currentPage: 1,\r\n            size: 10,\r\n            total: 0,\r\n            salaries: [],\r\n            currentSalary: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.initEmps()\r\n        this.initSalaries()\r\n    },\r\n    methods: {\r\n        hidePop(data) {\r\n            let temp = new Object()\r\n            temp.id = data.id\r\n            temp.salaryId = data.sid\r\n            console.log(this.currentSalary.id, '?', data.sid)\r\n            if (this.currentSalary && this.currentSalary.id != data.sid){\r\n                this.putRequest('/salary/sobcfg', temp).then(resp => {\r\n                    if (resp) {\r\n                        this.initEmps()\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        showPop(data) {\r\n            if (data) {\r\n                let cuSalary = new Object()\r\n                cuSalary.name = data.sname\r\n                cuSalary.id = data.id\r\n                this.currentSalary = cuSalary\r\n            }else {\r\n                this.currentSalary = null\r\n            }\r\n        },\r\n        initSalaries() {\r\n            this.getRequest('/salary/sob').then(resp => {\r\n                if (resp) {\r\n                    this.salaries = resp\r\n                }\r\n            })\r\n        },\r\n        sizeChange(size) {\r\n            this.size = size\r\n            this.initEmps()\r\n        },\r\n        currentChange(page) {\r\n            this.currentPage = page\r\n            this.initEmps()\r\n        },\r\n        initEmps() {\r\n            this.getRequest('/salary/sobcfg?currentPage='+this.currentPage+'&size='+this.size).then(resp => {\r\n                if (resp) {\r\n                    this.emps = resp.data\r\n                    this.total = resp.total\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"\">\r\n    \r\n</style>"]},"metadata":{},"sourceType":"module"}