{"ast":null,"code":"export default {\n  name: 'PermisManna',\n\n  data() {\n    return {\n      role: {\n        name: '',\n        nameZh: ''\n      },\n      roles: [],\n      allMenus: [],\n      defaultProps: {\n        children: 'children',\n        label: 'name'\n      }\n    };\n  },\n\n  mounted() {\n    this.initRoles();\n  },\n\n  methods: {\n    change(rid) {\n      if (rid) {\n        alert(rid);\n        this.initAllMenus();\n      }\n    },\n\n    initAllMenus() {\n      this.getRequest('/system/basic/permiss/menus').then(resp => {\n        if (resp) {\n          this.allMenus = resp;\n        }\n      });\n    },\n\n    initRoles() {\n      this.getRequest('/system/basic/permiss').then(resp => {\n        if (resp) {\n          this.roles = resp;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA4BA;EACAA,mBADA;;EAEAC;IACA;MACAC;QACAF,QADA;QAEAG;MAFA,CADA;MAKAC,SALA;MAMAC,YANA;MAOAC;QACAC,oBADA;QAEAC;MAFA;IAPA;EAYA,CAfA;;EAgBAC;IACA;EACA,CAlBA;;EAmBAC;IACAC;MACA;QACAC;QACA;MACA;IACA,CANA;;IAOAC;MACA;QACA;UACA;QACA;MACA,CAJA;IAKA,CAbA;;IAcAC;MACA;QACA;UACA;QACA;MACA,CAJA;IAKA;;EApBA;AAnBA","names":["name","data","role","nameZh","roles","allMenus","defaultProps","children","label","mounted","methods","change","alert","initAllMenus","initRoles"],"sourceRoot":"src/components/sys/basic","sources":["PermissMana.vue"],"sourcesContent":["<template lang=\"\">\r\n    <div>\r\n        <div class=\"permissMannaTool\">\r\n            <el-input size=\"small\" placeholder=\"请输入角色英文名\" v-model=\"role.name\" >\r\n                <template slot=\"prepend\">ROLE_</template>\r\n            </el-input>\r\n            <el-input v-model=\"role.nameZh\" size=\"small\" placeholder=\"请输入角色中文名\">\r\n            </el-input>\r\n            <el-button icon=\"el-icon-plus\" type=\"primary\" size=\"small\" @click=\"\">添加角色</el-button>\r\n        </div>\r\n        <div class=\"permissMannaMain\">\r\n            <el-collapse accordion @change=\"change\">\r\n                <el-collapse-item :title=\"r.nameZh\" :name=\"r.id\" v-for=\"(r, index) in roles\" :key=\"index\">\r\n                    <el-card class=\"box-card\">\r\n                        <div slot=\"header\" class=\"clearfix\">\r\n                          <span>可访问资源</span>\r\n                          <el-button style=\"float: right; padding: 3px 0; color: red;\" type=\"text\" icon=\"el-icon-delete\"></el-button>\r\n                        </div>\r\n                        <div>\r\n                            <el-tree :data=\"allMenus\" :props=\"defaultProps\" show-checkbox></el-tree>\r\n                        </div>\r\n                    </el-card>\r\n                </el-collapse-item>\r\n              </el-collapse>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'PermisManna',\r\n    data() {\r\n        return {\r\n            role: {\r\n                name: '',\r\n                nameZh: ''\r\n            },\r\n            roles: [],\r\n            allMenus: [],\r\n            defaultProps: {\r\n                children: 'children',\r\n                label: 'name'\r\n            }\r\n        }\r\n    },\r\n    mounted(){\r\n        this.initRoles()\r\n    },\r\n    methods: {\r\n        change(rid) {\r\n            if (rid) {\r\n                alert(rid)\r\n                this.initAllMenus()\r\n            }\r\n        },\r\n        initAllMenus() {\r\n            this.getRequest('/system/basic/permiss/menus').then(resp => {\r\n                if (resp) {\r\n                    this.allMenus = resp\r\n                }\r\n            })\r\n        },\r\n        initRoles() {\r\n            this.getRequest('/system/basic/permiss').then(resp => {\r\n                if (resp) {\r\n                    this.roles = resp\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n    .permissMannaTool{\r\n        display: flex;\r\n        justify-content: flex-start;\r\n    }\r\n\r\n    .permissMannaTool .el-input {\r\n        width: 300px;\r\n        margin-right: 6px;\r\n    }\r\n    .permissMannaMain{\r\n        margin-top: 10px;\r\n        width: 700px;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module"}