{"ast":null,"code":"import { getRequest } from \"./api\";\nexport const initMenu = (router, store) => {\n  if (store.state.routes.length > 0) {\n    return;\n  } else {\n    getRequest('/system/config/menu').then(data => {\n      if (data) {\n        // 格式化Router\n        let fmtRoutes = formatRoutes(data); // 将数据存入vuex\n\n        store.commit('initRoutes', fmtRoutes); // 添加到router\n\n        router.addRoutes(fmtRoutes);\n      }\n    });\n  }\n};\nexport const formatRoutes = routes => {\n  let fmtRoutes = [];\n  routes.forEach(router => {\n    let {\n      path,\n      component,\n      name,\n      iconCls,\n      children\n    } = router;\n\n    if (children && children instanceof Array) {\n      children = formatRoutes(children);\n    }\n\n    let fmRouter = {\n      path: path,\n      name: name,\n      iconCls: iconCls,\n      children: children,\n\n      component(resolve) {\n        if (component.startsWith('Home')) {\n          require(['../views/' + component + '.vue'], resolve);\n        } else if (component.startsWith('Emp')) {\n          require(['../views/emp/' + component + '.vue'], resolve);\n        } else if (component.startsWith('Per')) {\n          require(['../views/per/' + component + '.vue'], resolve);\n        } else if (component.startsWith('Sal')) {\n          require(['../views/sal/' + component + '.vue'], resolve);\n        } else if (component.startsWith('Sta')) {\n          require(['../views/sta/' + component + '.vue'], resolve);\n        } else if (component.startsWith('Sys')) {\n          require(['../views/sys/' + component + '.vue'], resolve);\n        }\n      }\n\n    };\n    fmtRoutes.push(fmRouter);\n  });\n  return fmtRoutes;\n};","map":{"version":3,"names":["getRequest","initMenu","router","store","state","routes","length","then","data","fmtRoutes","formatRoutes","commit","addRoutes","forEach","path","component","name","iconCls","children","Array","fmRouter","resolve","startsWith","require","push"],"sources":["E:/web-code/yeb/src/utils/menus.js"],"sourcesContent":["import { getRequest } from \"./api\"\r\n\r\nexport const initMenu = (router, store) => {\r\n    if (store.state.routes.length > 0) {\r\n        return\r\n    } else {\r\n        getRequest('/system/config/menu').then(data => {\r\n            if (data) {\r\n                // 格式化Router\r\n                let fmtRoutes = formatRoutes(data)\r\n                // 将数据存入vuex\r\n                store.commit('initRoutes', fmtRoutes)\r\n                // 添加到router\r\n                router.addRoutes(fmtRoutes)\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport const formatRoutes = (routes) => {\r\n    let fmtRoutes = [];\r\n    routes.forEach(router => {\r\n        let {\r\n            path,\r\n            component,\r\n            name,\r\n            iconCls,\r\n            children\r\n        } = router\r\n\r\n        if (children && children instanceof Array) {\r\n            children = formatRoutes(children)\r\n        }\r\n        let fmRouter = {\r\n            path: path,\r\n            name: name,\r\n            iconCls: iconCls,\r\n            children: children,\r\n            component(resolve) {\r\n                if (component.startsWith('Home')) {\r\n                    require(['../views/' + component + '.vue'], resolve)\r\n                } else if (component.startsWith('Emp')) {\r\n                    require(['../views/emp/' + component + '.vue'], resolve)\r\n                } else if (component.startsWith('Per')) {\r\n                    require(['../views/per/' + component + '.vue'], resolve)\r\n                } else if (component.startsWith('Sal')) {\r\n                    require(['../views/sal/' + component + '.vue'], resolve)\r\n                } else if (component.startsWith('Sta')) {\r\n                    require(['../views/sta/' + component + '.vue'], resolve)\r\n                } else if (component.startsWith('Sys')) {\r\n                    require(['../views/sys/' + component + '.vue'], resolve)\r\n                }\r\n            }\r\n        }\r\n        fmtRoutes.push(fmRouter)\r\n    })\r\n    return fmtRoutes\r\n} "],"mappings":"AAAA,SAASA,UAAT,QAA2B,OAA3B;AAEA,OAAO,MAAMC,QAAQ,GAAG,CAACC,MAAD,EAASC,KAAT,KAAmB;EACvC,IAAIA,KAAK,CAACC,KAAN,CAAYC,MAAZ,CAAmBC,MAAnB,GAA4B,CAAhC,EAAmC;IAC/B;EACH,CAFD,MAEO;IACHN,UAAU,CAAC,qBAAD,CAAV,CAAkCO,IAAlC,CAAuCC,IAAI,IAAI;MAC3C,IAAIA,IAAJ,EAAU;QACN;QACA,IAAIC,SAAS,GAAGC,YAAY,CAACF,IAAD,CAA5B,CAFM,CAGN;;QACAL,KAAK,CAACQ,MAAN,CAAa,YAAb,EAA2BF,SAA3B,EAJM,CAKN;;QACAP,MAAM,CAACU,SAAP,CAAiBH,SAAjB;MACH;IACJ,CATD;EAUH;AACJ,CAfM;AAiBP,OAAO,MAAMC,YAAY,GAAIL,MAAD,IAAY;EACpC,IAAII,SAAS,GAAG,EAAhB;EACAJ,MAAM,CAACQ,OAAP,CAAeX,MAAM,IAAI;IACrB,IAAI;MACAY,IADA;MAEAC,SAFA;MAGAC,IAHA;MAIAC,OAJA;MAKAC;IALA,IAMAhB,MANJ;;IAQA,IAAIgB,QAAQ,IAAIA,QAAQ,YAAYC,KAApC,EAA2C;MACvCD,QAAQ,GAAGR,YAAY,CAACQ,QAAD,CAAvB;IACH;;IACD,IAAIE,QAAQ,GAAG;MACXN,IAAI,EAAEA,IADK;MAEXE,IAAI,EAAEA,IAFK;MAGXC,OAAO,EAAEA,OAHE;MAIXC,QAAQ,EAAEA,QAJC;;MAKXH,SAAS,CAACM,OAAD,EAAU;QACf,IAAIN,SAAS,CAACO,UAAV,CAAqB,MAArB,CAAJ,EAAkC;UAC9BC,OAAO,CAAC,CAAC,cAAcR,SAAd,GAA0B,MAA3B,CAAD,EAAqCM,OAArC,CAAP;QACH,CAFD,MAEO,IAAIN,SAAS,CAACO,UAAV,CAAqB,KAArB,CAAJ,EAAiC;UACpCC,OAAO,CAAC,CAAC,kBAAkBR,SAAlB,GAA8B,MAA/B,CAAD,EAAyCM,OAAzC,CAAP;QACH,CAFM,MAEA,IAAIN,SAAS,CAACO,UAAV,CAAqB,KAArB,CAAJ,EAAiC;UACpCC,OAAO,CAAC,CAAC,kBAAkBR,SAAlB,GAA8B,MAA/B,CAAD,EAAyCM,OAAzC,CAAP;QACH,CAFM,MAEA,IAAIN,SAAS,CAACO,UAAV,CAAqB,KAArB,CAAJ,EAAiC;UACpCC,OAAO,CAAC,CAAC,kBAAkBR,SAAlB,GAA8B,MAA/B,CAAD,EAAyCM,OAAzC,CAAP;QACH,CAFM,MAEA,IAAIN,SAAS,CAACO,UAAV,CAAqB,KAArB,CAAJ,EAAiC;UACpCC,OAAO,CAAC,CAAC,kBAAkBR,SAAlB,GAA8B,MAA/B,CAAD,EAAyCM,OAAzC,CAAP;QACH,CAFM,MAEA,IAAIN,SAAS,CAACO,UAAV,CAAqB,KAArB,CAAJ,EAAiC;UACpCC,OAAO,CAAC,CAAC,kBAAkBR,SAAlB,GAA8B,MAA/B,CAAD,EAAyCM,OAAzC,CAAP;QACH;MACJ;;IAnBU,CAAf;IAqBAZ,SAAS,CAACe,IAAV,CAAeJ,QAAf;EACH,CAlCD;EAmCA,OAAOX,SAAP;AACH,CAtCM"},"metadata":{},"sourceType":"module"}