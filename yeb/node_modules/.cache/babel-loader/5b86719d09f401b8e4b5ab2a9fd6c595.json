{"ast":null,"code":"export default {\n  name: 'EmpBasic',\n\n  data() {\n    return {\n      searchValue: {\n        politicId: null,\n        nationId: null,\n        posId: null,\n        jobLevel: null,\n        engageForm: null,\n        departmentId: null,\n        beginDateScope: null\n      },\n      showAdvanceSearchVisible: false,\n      importDataDisabled: false,\n      importDataBtnText: '导入数据',\n      importDataBtnIcon: 'el-icon-upload2',\n      title: '',\n      options: [],\n      inputDepName: '',\n      defaultProps: {\n        children: 'children',\n        label: 'name'\n      },\n      allDeps: [],\n      visible: false,\n      visible2: false,\n      tiptopDegree: ['博士', '硕士', '本科', '大专', '高中', '初中', '小学', '其他'],\n      nations: [],\n      jobLevel: [],\n      politicsstatus: [],\n      positions: [],\n      loading: false,\n      total: 0,\n      emps: [],\n      page: 1,\n      size: 10,\n      empName: '',\n      dialogVisible: false,\n      emp: {\n        id: null,\n        name: '',\n        gender: '',\n        birthday: '',\n        idCard: '',\n        wedlock: '',\n        nationId: null,\n        nativePlace: '',\n        politicId: null,\n        email: '',\n        phone: '',\n        address: '',\n        departmentId: null,\n        jobLevelId: null,\n        posId: '',\n        engageForm: '',\n        tiptopDegree: '',\n        specialty: '',\n        school: '',\n        beginDate: '',\n        workState: '在职',\n        workID: '',\n        contractTerm: null,\n        conversionTime: '',\n        notWorkDate: null,\n        beginContract: '',\n        endContract: '',\n        workAge: null,\n        salaryId: null\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: '请输入员工姓名',\n          trigger: 'blur'\n        }],\n        gender: [{\n          required: true,\n          message: '请输入员工性别',\n          trigger: 'blur'\n        }],\n        birthday: [{\n          required: true,\n          message: '请输入员工出生日期',\n          trigger: 'blur'\n        }],\n        idCard: [{\n          required: true,\n          message: '请输入员工身份证号码',\n          trigger: 'blur'\n        }, {\n          pattern: /(^[1-9]\\d{5}(18|19|([23]\\d))\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$)|(^[1-9]\\d{5}\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{2}$)/,\n          message: '身份证号码不正确',\n          trigger: 'blur'\n        }],\n        wedlock: [{\n          required: true,\n          message: '请输入员工婚姻状况',\n          trigger: 'blur'\n        }],\n        nationId: [{\n          required: true,\n          message: '请输入员工民族',\n          trigger: 'blur'\n        }],\n        nativePlace: [{\n          required: true,\n          message: '请输入员工籍贯',\n          trigger: 'blur'\n        }],\n        politicId: [{\n          required: true,\n          message: '请输入员工政治面貌',\n          trigger: 'blur'\n        }],\n        email: [{\n          required: true,\n          message: '请输入员工邮箱地址',\n          trigger: 'blur'\n        }, {\n          type: 'email',\n          message: '邮箱地址格式不正确',\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: true,\n          message: '请输入员工电话',\n          trigger: 'blur'\n        }],\n        address: [{\n          required: true,\n          message: '请输入员工地址',\n          trigger: 'blur'\n        }],\n        departmentId: [{\n          required: true,\n          message: '请输入员工部门',\n          trigger: 'blur'\n        }],\n        jobLevelId: [{\n          required: true,\n          message: '请输入员工职称',\n          trigger: 'blur'\n        }],\n        posId: [{\n          required: true,\n          message: '请输入员工职位',\n          trigger: 'blur'\n        }],\n        engageForm: [{\n          required: true,\n          message: '请输入员工聘用形式',\n          trigger: 'blur'\n        }],\n        tiptopDegree: [{\n          required: true,\n          message: '请输入员工学历',\n          trigger: 'blur'\n        }],\n        specialty: [{\n          required: true,\n          message: '请输入员工专业',\n          trigger: 'blur'\n        }],\n        school: [{\n          required: true,\n          message: '请输入员工毕业院校',\n          trigger: 'blur'\n        }],\n        beginDate: [{\n          required: true,\n          message: '请输入员工入职日期',\n          trigger: 'blur'\n        }],\n        workState: [{\n          required: true,\n          message: '请输入员工工作状态',\n          trigger: 'blur'\n        }],\n        workID: [{\n          required: true,\n          message: '请输入员工工号',\n          trigger: 'blur'\n        }],\n        contractTerm: [{\n          required: true,\n          message: '请输入员工合同期限',\n          trigger: 'blur'\n        }],\n        conversionTime: [{\n          required: true,\n          message: '请输入员工转正日期',\n          trigger: 'blur'\n        }],\n        notWorkDate: [{\n          required: true,\n          message: '请输入员工离职日期',\n          trigger: 'blur'\n        }],\n        beginContract: [{\n          required: true,\n          message: '请输入员工合同其实日期',\n          trigger: 'blur'\n        }],\n        endContract: [{\n          required: true,\n          message: '请输入员工合同结束日期',\n          trigger: 'blur'\n        }],\n        workAge: [{\n          required: true,\n          message: '请输入员工工龄',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  mounted() {\n    this.initEmps();\n    this.initData();\n    this.initPositions();\n  },\n\n  methods: {\n    cancelSearch() {\n      this.showAdvanceSearchVisible = !this.showAdvanceSearchVisible;\n      this.initEmps();\n      this.loading = false;\n    },\n\n    onSuccess() {\n      this.importDataBtnIcon = 'el-icon-upload2';\n      this.importDataBtnText = '导入数据';\n      this.initEmps();\n      this.importDataDisabled = false;\n    },\n\n    onError() {\n      this.importDataBtnIcon = 'el-icon-upload2';\n      this.importDataBtnText = '导入数据';\n      this.importDataDisabled = false;\n    },\n\n    beforeUpload() {\n      this.importDataBtnIcon = 'el-icon-loading';\n      this.importDataBtnText = '正在导入';\n      this.importDataDisabled = true;\n    },\n\n    exportData() {\n      this.downloadRequest('/employee/basic/export').then(resp => {\n        // 将响应数据处理为Blob类型\n        var blob = new Blob([resp]);\n        console.log(resp.data); // 创建一个URL对象\n\n        var url = window.URL.createObjectURL(blob); // 创建一个a标签\n\n        var a = document.createElement(\"a\");\n        a.href = url;\n        a.download = \"员工数据.txt\"; // 这里指定下载文件的文件名\n\n        a.click(); // 释放之前创建的URL对象\n\n        window.URL.revokeObjectURL(url);\n      }).catch(function (reason) {\n        console.log(reason);\n      });\n    },\n\n    cancel() {\n      this.dialogVisible = false;\n      this.visible = false;\n    },\n\n    showEditEmp(data) {\n      this.initPositions();\n      this.inputDepName = data.dname;\n      this.title = '编辑员工信息';\n      this.emp = data;\n      this.dialogVisible = true;\n    },\n\n    doAddEmp() {\n      if (this.emp.id) {\n        this.$refs['empForm'].validate(valid => {\n          if (valid) {\n            this.putRequest('/employee/basic', this.emp).then(resp => {\n              if (resp) {\n                this.dialogVisible = false;\n                this.initEmps();\n              }\n            });\n          }\n        });\n      } else {\n        this.$refs['empForm'].validate(valid => {\n          if (valid) {\n            this.postRequest('/employee/basic', this.emp).then(resp => {\n              if (resp) {\n                this.dialogVisible = false;\n                this.initEmps();\n              }\n            });\n          }\n        });\n      }\n    },\n\n    handleNodeClick(data) {\n      this.inputDepName = data.name;\n      this.emp.departmentId = data.id;\n      this.visible = !this.visible;\n    },\n\n    searchHandleNodeClick(data) {\n      this.inputDepName = data.name;\n      this.searchValue.departmentId = data.id;\n      this.visible2 = !this.visible2;\n    },\n\n    showDepView() {\n      this.visible = !this.visible;\n    },\n\n    showDepView2() {\n      this.visible2 = !this.visible2;\n    },\n\n    getMaxWorkId() {\n      this.getRequest('/system/basic/workId').then(resp => {\n        if (resp) {\n          this.emp.workID = '00000' + resp.data;\n        }\n      });\n    },\n\n    initPositions() {\n      this.getRequest('/system/basic/positions').then(resp => {\n        if (resp) {\n          this.positions = resp;\n        }\n      });\n    },\n\n    initData() {\n      if (!window.sessionStorage.getItem('nations')) {\n        this.getRequest('/system/basic/nation').then(resp => {\n          if (resp) {\n            this.nations = resp;\n            window.sessionStorage.setItem('nations', JSON.stringify(resp));\n          }\n        });\n      } else {\n        this.nations = JSON.parse(window.sessionStorage.getItem('nations'));\n      }\n\n      if (!window.sessionStorage.getItem('jobLevel')) {\n        this.getRequest('/system/basic/jobLevel').then(resp => {\n          if (resp) {\n            this.jobLevel = resp;\n            window.sessionStorage.setItem('jobLevel', JSON.stringify(resp));\n          }\n        });\n      } else {\n        this.jobLevel = JSON.parse(window.sessionStorage.getItem('jobLevel'));\n      }\n\n      if (!window.sessionStorage.getItem('politicsstatus')) {\n        this.getRequest('/system/basic/politicsstatus').then(resp => {\n          if (resp) {\n            this.politicsstatus = resp;\n            window.sessionStorage.setItem('politicsstatus', JSON.stringify(resp));\n          }\n        });\n      } else {\n        this.politicsstatus = JSON.parse(window.sessionStorage.getItem('politicsstatus'));\n      }\n\n      if (!window.sessionStorage.getItem('allDeps')) {\n        this.getRequest('/system/basic/department').then(resp => {\n          if (resp) {\n            this.allDeps = resp;\n            window.sessionStorage.setItem('allDeps', JSON.stringify(resp));\n          }\n        });\n      } else {\n        this.allDeps = JSON.parse(window.sessionStorage.getItem('allDeps'));\n      }\n    },\n\n    showAddEmp() {\n      this.inputDepName = '';\n      this.title = '添加员工';\n      this.dialogVisible = true;\n      this.emp = {\n        id: null,\n        name: '',\n        gender: '',\n        birthday: '',\n        idCard: '',\n        wedlock: '',\n        nationId: null,\n        nativePlace: '',\n        politicId: null,\n        email: '',\n        phone: '',\n        address: '',\n        departmentId: null,\n        jobLevelId: null,\n        posId: '',\n        engageForm: '',\n        tiptopDegree: '',\n        specialty: '',\n        school: '',\n        beginDate: '',\n        workState: '在职',\n        workID: '',\n        contractTerm: null,\n        conversionTime: '',\n        notWorkDate: null,\n        beginContract: '',\n        endContract: '',\n        workAge: null,\n        salaryId: null\n      };\n      this.initPositions();\n      this.getMaxWorkId();\n    },\n\n    sizeChange(size) {\n      this.size = size;\n      this.initEmps();\n    },\n\n    currentChange(currentPage) {\n      this.page = currentPage;\n      this.initEmps();\n    },\n\n    delEmp(data) {\n      this.$confirm('是否删除' + data.name + '--' + data.id + ', 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteRequest('/employee/basic', data).then(resp => {\n          if (resp) {\n            this.initEmps();\n          }\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n\n    initEmps() {\n      this.loading = true;\n      let url = '/employee/basic/?currentPage=' + this.page + '&size=' + this.size;\n\n      if (this.searchValue.politicId) {\n        url += '&politicId=' + this.searchValue.politicId;\n        this.searchValue.politicId = null;\n      }\n\n      if (this.searchValue.nationId) {\n        url += '&nationId=' + this.searchValue.nationId;\n        this.searchValue.nationId = null;\n      }\n\n      if (this.searchValue.posId) {\n        url += '&posId=' + this.searchValue.posId;\n        this.searchValue.posId = null;\n      }\n\n      if (this.searchValue.jobLevelId) {\n        url += '&jobLevelId=' + this.searchValue.jobLevelId;\n        this.searchValue.jobLevelId = null;\n      }\n\n      if (this.searchValue.engageForm) {\n        url += '&engageForm=' + this.searchValue.engageForm;\n        this.searchValue.engageForm = null;\n      }\n\n      if (this.searchValue.departmentId) {\n        url += '&departmentId=' + this.searchValue.departmentId;\n        this.searchValue.departmentId = null;\n      }\n\n      if (this.searchValue.beginDateScope) {\n        url += '&beginDateScope=' + this.searchValue.beginDateScope;\n        this.searchValue.beginDateScope = null;\n      } else {\n        url += '&name=' + this.empName;\n      }\n\n      this.getRequest(url).then(resp => {\n        this.loading = false;\n\n        if (resp) {\n          this.emps = resp.data;\n          this.total = resp.total;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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ACA;YACA,CALA;UAMA;QACA,CATA;MAUA;IACA,CA3EA;;IA4EAC;MACA;MACA;MACA;IACA,CAhFA;;IAiFAC;MACA;MACA;MACA;IACA,CArFA;;IAsFAC;MACA;IACA,CAxFA;;IAyFAC;MACA;IACA,CA3FA;;IA4FAC;MACA;QACA;UACA;QACA;MACA,CAJA;IAKA,CAlGA;;IAmGAC;MACA;QACA;UACA;QACA;MACA,CAJA;IAKA,CAzGA;;IA0GAC;MACA;QACA;UACA;YACA;YACAX;UACA;QACA,CALA;MAMA,CAPA,MAOA;QACA;MACA;;MACA;QACA;UACA;YACA;YACAA;UACA;QACA,CALA;MAMA,CAPA,MAOA;QACA;MACA;;MACA;QACA;UACA;YACA;YACAA;UACA;QACA,CALA;MAMA,CAPA,MAOA;QACA;MACA;;MACA;QACA;UACA;YACA;YACAA;UACA;QACA,CALA;MAMA,CAPA,MAOA;QACA;MACA;IACA,CAnJA;;IAoJAY;MACA;MACA;MACA;MACA;QACAjD,QADA;QAEAnC,QAFA;QAGAoC,UAHA;QAIAC,YAJA;QAKAC,UALA;QAMAC,WANA;QAOAnC,cAPA;QAQAoC,eARA;QASArC,eATA;QAUAsC,SAVA;QAWAC,SAXA;QAYAC,WAZA;QAaAnC,kBAbA;QAcAoC,gBAdA;QAeAvC,SAfA;QAgBAE,cAhBA;QAiBAgB,gBAjBA;QAkBAsB,aAlBA;QAmBAC,UAnBA;QAoBAC,aApBA;QAqBAC,eArBA;QAsBAC,UAtBA;QAuBAC,kBAvBA;QAwBAC,kBAxBA;QAyBAC,iBAzBA;QA0BAC,iBA1BA;QA2BAC,eA3BA;QA4BAC,aA5BA;QA6BAC;MA7BA;MA+BA;MACA;IACA,CAzLA;;IA0LA6B;MACA;MACA;IACA,CA7LA;;IA8LAC;MACA;MACA;IACA,CAjMA;;IAkMAC;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGA3B;MAHA,GAIA4B,IAJA,CAIA;QACA;UACA;YACA;UACA;QACA,CAJA;MAKA,CAVA,EAUAjB,KAVA,CAUA;QACA;UACAX,YADA;UAEAH;QAFA;MAIA,CAfA;IAgBA,CAnNA;;IAoNAgC;MACA;MACA;;MACA;QACAC;QACA;MACA;;MACA;QACAA;QACA;MACA;;MACA;QACAA;QACA;MACA;;MACA;QACAA;QACA;MACA;;MACA;QACAA;QACA;MACA;;MACA;QACAA;QACA;MACA;;MACA;QACAA;QACA;MACA,CAHA,MAGA;QACAA;MACA;;MACA;QACA;;QACA;UACA;UACA;QACA;MACA,CANA;IAOA;;EA5PA;AA3GA","names":["name","data","searchValue","politicId","nationId","posId","jobLevel","engageForm","departmentId","beginDateScope","showAdvanceSearchVisible","importDataDisabled","importDataBtnText","importDataBtnIcon","title","options","inputDepName","defaultProps","children","label","allDeps","visible","visible2","tiptopDegree","nations","politicsstatus","positions","loading","total","emps","page","size","empName","dialogVisible","emp","id","gender","birthday","idCard","wedlock","nativePlace","email","phone","address","jobLevelId","specialty","school","beginDate","workState","workID","contractTerm","conversionTime","notWorkDate","beginContract","endContract","workAge","salaryId","rules","required","message","trigger","pattern","type","mounted","methods","cancelSearch","onSuccess","onError","beforeUpload","exportData","console","a","window","catch","cancel","showEditEmp","doAddEmp","handleNodeClick","searchHandleNodeClick","showDepView","showDepView2","getMaxWorkId","initPositions","initData","showAddEmp","sizeChange","currentChange","delEmp","confirmButtonText","cancelButtonText","then","initEmps","url"],"sourceRoot":"src/views/emp","sources":["EmpBasic.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div style=\"display:flex;justify-content:space-between\">\r\n            <div>\r\n                <el-input @clear=\"initEmps\" clearable  @keydown.enter.native=\"initEmps\" v-model=\"empName\" style=\"width: 300px; margin-right: 10px;\" placeholder=\"请输入员工姓名进行搜索\" size=\"small\" prefix-icon=\"el-icon-search\"></el-input>\r\n                <el-button type=\"primary\" size=\"small\" icon=\"el-icon-search\" @click=\"initEmps\">搜索</el-button>\r\n                <el-button type=\"primary\" size=\"small\" @click=\"showAdvanceSearchVisible = !showAdvanceSearchVisible\"><i :class=\"showAdvanceSearchVisible? 'fa fa-angle-double-up' : 'fa fa-angle-double-down'\" aria-hidden=\"true\"></i>高级搜索</el-button>\r\n            </div>\r\n            <div>\r\n              <el-upload\r\n              style=\"display:inline-block; margin-right: 8px\"\r\n              :show-file-list=\"false\"\r\n              :before-upload=\"beforeUpload\"\r\n              :on-success=\"onSuccess\"\r\n              :on-error=\"onError\"\r\n              :disabled=\"importDataDisabled\"\r\n              action=\"https://jsonplaceholder.typicode.com/posts/\">\r\n              <el-button :disabled=\"importDataDisabled\" style=\"background-color: #68B138;color:white\" type=\"sucess\" size=\"small\" :icon=\"importDataBtnIcon\" @click=\"\">{{ importDataBtnText }}</el-button>\r\n            </el-upload>\r\n                <el-button style=\"background-color: #68B138;color:white\" type=\"sucess\" size=\"small\" icon=\"el-icon-download\" @click=\"exportData\">导出数据</el-button>\r\n                <el-button type=\"primary\" size=\"small\" @click=\"showAddEmp\" icon=\"el-icon-plus\">添加员工</el-button>\r\n            </div>\r\n        </div>\r\n        <transition name=\"slide-fade\">\r\n        <div v-show=\"showAdvanceSearchVisible\" style=\"border: 1px solid #409eff; border-radius: 5px;box-sizing: border-box;padding:5px;margin: 10px 0px;\">\r\n          <el-row>\r\n            <el-col :span=\"5\">\r\n              政治面貌：\r\n              <el-select v-model=\"searchValue.politicId\" placeholder=\"请选择政治面貌\" clearable size=\"mini\" style=\"width: 130px;\">\r\n                <el-option v-for=\"item in politicsstatus\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              民族：\r\n              <el-select v-model=\"searchValue.nationId\" placeholder=\"请选择民族\" size=\"mini\" clearable style=\"width: 130px;\">\r\n                <el-option v-for=\"item in nations\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              职位：\r\n              <el-select v-model=\"searchValue.posId\" placeholder=\"职位\" size=\"mini\" style=\"width: 120px;\">\r\n                <el-option v-for=\"item in positions\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              职称：\r\n              <el-select v-model=\"searchValue.jobLevelId\" placeholder=\"职称\" size=\"mini\" style=\"width: 130px;\">\r\n                <el-option v-for=\"item in jobLevel\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              聘用形式：\r\n              <el-radio-group v-model=\"searchValue.engageForm\" >\r\n                <el-radio label=\"劳动合同\">劳动合同</el-radio>\r\n                <el-radio label=\"劳务合同\">劳务合同</el-radio>\r\n              </el-radio-group>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row>\r\n            <el-col :span=\"5\">\r\n              所属部门：\r\n              <el-popover\r\n                      title=\"请选择部门\"\r\n                      width=\"200\"\r\n                      trigger=\"manual\"\r\n                      v-model=\"visible2\">\r\n                    <el-tree :data=\"allDeps\"\r\n                             :props=\"defaultProps\"\r\n                             :expand-on-click-node=\"false\"\r\n                             default-expand-all\r\n                             @node-click=\"searchHandleNodeClick\"></el-tree>\r\n                    <div slot=\"reference\"\r\n                         style=\"width:130px;display: inline-flex;\r\n                         border-radius: 5px;border: 1px solid #dedede;height: 28px;cursor: pointer;align-items: center;\r\n                         font-size: 12px;padding-left: 8px;margin-top: 8px;box-sizing: border-box;\"\r\n                         @click=\"showDepView2\">{{ inputDepName }}\r\n                    </div>\r\n                  </el-popover>\r\n            </el-col>\r\n            <el-col :span=\"10\">\r\n              入职日期：\r\n              <el-date-picker\r\n              style=\"margin-top:10px;\"\r\n              size=\"small\"\r\n              v-model=\"searchValue.beginDateScope\"\r\n              type=\"daterange\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              unlink-panels\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\">\r\n            </el-date-picker>\r\n            </el-col>\r\n            <el-col :span=\"5\" :offset=\"4\" style=\"margin-top:10px;\">\r\n              <el-button type=\"primary\" size=\"mini\" @click=\"cancelSearch\">取消</el-button>\r\n              <el-button icon=\"el-icon-search\" type=\"primary\" size=\"mini\" @click=\"initEmps\">搜索</el-button>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n        </transition>\r\n        <div>\r\n            <el-table\r\n            :data=\"emps\"\r\n            stripe\r\n            border\r\n            v-loading=\"loading\"\r\n            element-loading-text=\"拼命加载中\"\r\n            element-loading-spinner=\"el-icon-loading\"\r\n            element-loading-background=\"rgba(0, 0, 0, 0.8)\"\r\n            style=\"width: 100%\">\r\n            <el-table-column\r\n              type=\"selection\"\r\n              width=\"40\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"name\"\r\n              label=\"姓名\"\r\n              width=\"70\"\r\n              fixed=\"left\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"workID\"\r\n              label=\"工号\"\r\n              width=\"90\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"gender\"\r\n              label=\"性别\"\r\n              width=\"50\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"birthday\"\r\n              label=\"出生日期\"\r\n              width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"idCard\"\r\n              label=\"身份证号码\"\r\n              width=\"170\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"wedlock\"\r\n              label=\"婚姻状况\"\r\n              width=\"80\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"nname\"\r\n              label=\"民族\"\r\n              width=\"50\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"nativePlace\"\r\n              label=\"籍贯\"\r\n              width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"pname\"\r\n              label=\"政治面貌\"\r\n              width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"email\"\r\n              label=\"邮箱\"\r\n              width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"phone\"\r\n              label=\"电话号码\"\r\n              width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"address\"\r\n              label=\"联系地址\"\r\n              width=\"320\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"dname\"\r\n              label=\"所属部门\"\r\n              width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"posname\"\r\n              label=\"职位\"\r\n              width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"engageForm\"\r\n              label=\"聘用形式\"\r\n              width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"tiptopDegree\"\r\n              label=\"最高学历\"\r\n              width=\"80\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"school\"\r\n              label=\"毕业院校\"\r\n              width=\"150\">\r\n            </el-table-column>\r\n            <el-table-column\r\n            prop=\"specialty\"\r\n            label=\"专业\"\r\n            width=\"150\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"workState\"\r\n              label=\"在职状态\"\r\n              width=\"80\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"beginDate\"\r\n              label=\"入职日期\"\r\n              width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"conversionTime\"\r\n              label=\"转正日期\"\r\n              width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"beginContract\"\r\n              label=\"合同起始日期\"\r\n              width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"endContract\"\r\n              label=\"合同截止日期\"\r\n              width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"操作\"\r\n              width=\"100\"\r\n                fixed=\"right\">\r\n              <template slot-scope=\"scope\">\r\n                    <el-button style=\"padding:3px;\" size=\"mini\" @click=\"showEditEmp(scope.row)\">编辑</el-button>\r\n                    <!-- <el-button type=\"primary\" size=\"default\" @click=\"\">查看高级资料</el-button> -->\r\n                    <el-button style=\"padding:3px;\" type=\"danger\" size=\"mini\" @click=\"delEmp(scope.row)\">删除</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <div style=\"display:flex; justify-content: flex-end;\">\r\n            <el-pagination\r\n            background\r\n            @size-change=\"sizeChange\"\r\n            @current-change=\"currentChange\"\r\n            layout=\"sizes, prev, pager, next, jumper, ->, total, slot\"\r\n            :total=\"total\">\r\n          </el-pagination>\r\n          </div>\r\n        </div>\r\n        <el-dialog\r\n        :title=\"title\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"80%\">\r\n        <div>\r\n          <el-form :model=\"emp\" ref=\"empForm\" :rules=\"rules\">\r\n            <el-row>\r\n              <el-col :span=\"6\">\r\n                <el-form-item label=\"姓名:\" prop=\"name\">\r\n                  <el-input prefix-icon=\"el-icon-edit\" style=\"width: 150px;\" v-model=\"emp.name\" placeholder=\"请输入员工姓名\" size=\"mini\" clearable @change=\"\"></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"5\">\r\n                <el-form-item v-model=\"emp.gender\" label=\"性别:\" size=\"normal\" prop=\"gender\">\r\n                  <el-radio-group v-model=\"emp.gender\" style=\"margin-top: 5px;\">\r\n                    <el-radio label=\"男\"></el-radio>\r\n                    <el-radio label=\"女\"></el-radio>\r\n                  </el-radio-group>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"6\">\r\n                <el-form-item label=\"出生日期:\" size=\"normal\" prop=\"birthday\">\r\n                  <el-date-picker v-model=\"emp.birthday\" type=\"date\" value-format=\"yyyy-MM-dd\" placeholder=\"请输入日期\" size=\"mini\" style=\"width:150px;\">\r\n                  </el-date-picker>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"7\">\r\n                <el-form-item label=\"政治面貌:\" prop=\"politicId\" size=\"normal\">\r\n                  <el-select v-model=\"emp.politicId\" placeholder=\"请选择政治面貌\" clearable size=\"mini\" style=\"width: 200px;\">\r\n                    <el-option v-for=\"item in politicsstatus\"\r\n                      :key=\"item.id\"\r\n                      :label=\"item.name\"\r\n                      :value=\"item.id\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"6\">\r\n                <el-form-item label=\"民族:\" prop=\"nationId\" size=\"normal\">\r\n                  <el-select v-model=\"emp.nationId\" placeholder=\"请选择民族\" size=\"mini\" clearable style=\"width: 150px;\">\r\n                    <el-option v-for=\"item in nations\"\r\n                      :key=\"item.id\"\r\n                      :label=\"item.name\"\r\n                      :value=\"item.id\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"5\">\r\n                <el-form-item label=\"籍贯:\" prop=\"nativePlace\" size=\"normal\">\r\n                  <el-input v-model=\"emp.nativePlace\" placeholder=\"籍贯\" prefix-icon=\"el-icon-edit\" size=\"small\"\r\n                          style=\"width: 120px;\"></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"6\">\r\n                <el-form-item label=\"电子邮箱:\" prop=\"email\">\r\n                  <el-input v-model=\"emp.email\" placeholder=\"请输入电子邮箱\" prefix-icon=\"el-icon-message\" size=\"mini\"\r\n                            style=\"width: 150px;\"></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"7\">\r\n                <el-form-item label=\"联系地址:\" prop=\"address\">\r\n                  <el-input v-model=\"emp.address\" placeholder=\"请输入联系地址\" prefix-icon=\"el-icon-edit\" size=\"mini\"\r\n                            style=\"width: 200px;\"></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"6\">\r\n                <el-form-item label=\"职位:\" prop=\"posId\">\r\n                  <el-select v-model=\"emp.posId\" placeholder=\"职位\" size=\"mini\" style=\"width: 150px;\">\r\n                    <el-option v-for=\"item in positions\"\r\n                      :key=\"item.id\"\r\n                      :label=\"item.name\"\r\n                      :value=\"item.id\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"5\">\r\n                <el-form-item label=\"职称:\" prop=\"jobLevelId\">\r\n                  <el-select v-model=\"emp.jobLevelId\" placeholder=\"职称\" size=\"mini\" style=\"width: 150px;\">\r\n                    <el-option v-for=\"item in jobLevel\"\r\n                      :key=\"item.id\"\r\n                      :label=\"item.name\"\r\n                      :value=\"item.id\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"6\">\r\n                <el-form-item label=\"所属部门:\" prop=\"departmentId\">\r\n                  <el-popover\r\n                      title=\"请选择部门\"\r\n                      width=\"200\"\r\n                      trigger=\"manual\"\r\n                      v-model=\"visible\">\r\n                    <el-tree :data=\"allDeps\"\r\n                             :props=\"defaultProps\"\r\n                             :expand-on-click-node=\"false\"\r\n                             default-expand-all\r\n                             @node-click=\"handleNodeClick\"></el-tree>\r\n                    <div slot=\"reference\"\r\n                         style=\"width:150px;display: inline-flex;\r\n                         border-radius: 5px;border: 1px solid #dedede;height: 28px;cursor: pointer;align-items: center;\r\n                         font-size: 12px;padding-left: 8px;margin-top: 8px;box-sizing: border-box;\"\r\n                         @click=\"showDepView\">{{ inputDepName }}\r\n                    </div>\r\n                  </el-popover>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"7\">\r\n                <el-form-item label=\"电话号码:\" prop=\"phone\">\r\n                  <el-input v-model=\"emp.phone\" placeholder=\"请输入电话号码\" size=\"mini\" style=\"width: 200px;\"\r\n                            prefix-icon=\"el-icon-phone\"></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"6\">\r\n                <el-form-item label=\"工号:\" prop=\"workID\">\r\n                  <el-input disabled v-model=\"emp.workID\" placeholder=\"请输入工号\" size=\"mini\" style=\"width: 150px;\"\r\n                            prefix-icon=\"el-icon-edit\"></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"5\">\r\n                <el-form-item label=\"学历:\" prop=\"tiptopDegree\">\r\n                  <el-select v-model=\"emp.tiptopDegree\" placeholder=\"职称\" size=\"mini\" style=\"width: 150px;\">\r\n                    <el-option v-for=\"item in tiptopDegree\"\r\n                      :key=\"item\"\r\n                      :label=\"item\"\r\n                      :value=\"item\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"6\">\r\n                <el-form-item label=\"毕业院校:\" prop=\"school\">\r\n                  <el-input v-model=\"emp.school\" placeholder=\"请输入学校\" size=\"mini\" style=\"width: 150px;\"\r\n                            prefix-icon=\"el-icon-edit\"></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"7\">\r\n                <el-form-item label=\"专业名称:\" prop=\"specialty\">\r\n                  <el-input v-model=\"emp.specialty\" placeholder=\"请输入专业名称\" size=\"mini\" style=\"width: 200px;\"\r\n                            prefix-icon=\"el-icon-edit\"></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"6\">\r\n                <el-form-item label=\"入职日期:\" prop=\"beginDate\">\r\n                  <el-date-picker\r\n                      v-model=\"emp.beginDate\"\r\n                      type=\"date\"\r\n                      value-format=\"yyyy-MM-dd\"\r\n                      size=\"mini\"\r\n                      style=\"width: 120px;\"\r\n                      placeholder=\"入职日期\">\r\n                  </el-date-picker>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"5\">\r\n                <el-form-item label=\"转正日期:\" prop=\"conversionTime\">\r\n                  <el-date-picker\r\n                      v-model=\"emp.conversionTime\"\r\n                      type=\"date\"\r\n                      value-format=\"yyyy-MM-dd\"\r\n                      size=\"mini\"\r\n                      style=\"width: 120px;\"\r\n                      placeholder=\"转正日期\">\r\n                  </el-date-picker>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"6\">\r\n                <el-form-item label=\"合同起始日期:\" prop=\"beginContract\">\r\n                  <el-date-picker\r\n                      v-model=\"emp.beginContract\"\r\n                      type=\"date\"\r\n                      value-format=\"yyyy-MM-dd\"\r\n                      size=\"mini\"\r\n                      style=\"width: 135px;\"\r\n                      placeholder=\"合同起始日期\">\r\n                  </el-date-picker>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"7\">\r\n                <el-form-item label=\"合同截止日期:\" prop=\"endContract\">\r\n                  <el-date-picker\r\n                      v-model=\"emp.endContract\"\r\n                      type=\"date\"\r\n                      value-format=\"yyyy-MM-dd\"\r\n                      size=\"mini\"\r\n                      style=\"width: 170px;\"\r\n                      placeholder=\"合同截止日期\">\r\n                  </el-date-picker>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"身份证号码:\" prop=\"idCard\">\r\n                  <el-input v-model=\"emp.idCard\" placeholder=\"请输入身份证号码\"\r\n                            size=\"mini\" prefix-icon=\"el-icon-edit\" style=\"width: 180px;\"></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"聘用形式:\" prop=\"engageForm\">\r\n                  <el-radio-group v-model=\"emp.engageForm\" style=\"margin-top: 8px;\">\r\n                    <el-radio label=\"劳动合同\">劳动合同</el-radio>\r\n                    <el-radio label=\"劳务合同\">劳务合同</el-radio>\r\n                  </el-radio-group>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"婚姻状况:\" prop=\"wedlock\">\r\n                  <el-radio-group v-model=\"emp.wedlock\" style=\"margin-top: 8px;\">\r\n                    <el-radio label=\"未婚\">未婚</el-radio>\r\n                    <el-radio label=\"已婚\">已婚</el-radio>\r\n                    <el-radio label=\"离异\">离异</el-radio>\r\n                  </el-radio-group>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n          </el-form>\r\n        </div>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"cancel\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"doAddEmp\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'EmpBasic',\r\n    data() {\r\n        return {\r\n            searchValue: {\r\n              politicId: null,\r\n              nationId: null,\r\n              posId: null,\r\n              jobLevel: null,\r\n              engageForm: null,\r\n              departmentId: null,\r\n              beginDateScope: null,\r\n\r\n            },\r\n            showAdvanceSearchVisible: false,\r\n            importDataDisabled: false,\r\n            importDataBtnText: '导入数据',\r\n            importDataBtnIcon: 'el-icon-upload2',\r\n            title: '',\r\n            options: [],\r\n            inputDepName: '',\r\n            defaultProps: {\r\n              children: 'children',\r\n              label: 'name'\r\n            },\r\n            allDeps: [],\r\n            visible: false,\r\n            visible2: false,\r\n            tiptopDegree: ['博士','硕士','本科','大专','高中','初中','小学','其他'],\r\n            nations: [],\r\n            jobLevel: [],\r\n            politicsstatus: [],\r\n            positions: [],\r\n            loading: false,\r\n            total: 0,\r\n            emps: [],\r\n            page: 1,\r\n            size: 10,\r\n            empName: '',\r\n            dialogVisible: false,\r\n            emp: {\r\n              id: null,\r\n              name: '',\r\n              gender: '',\r\n              birthday: '',\r\n              idCard: '',\r\n              wedlock: '',\r\n              nationId:  null,\r\n              nativePlace: '',\r\n              politicId: null,\r\n              email: '',\r\n              phone: '',\r\n              address: '',\r\n              departmentId: null,\r\n              jobLevelId: null,\r\n              posId: '',\r\n              engageForm: '',\r\n              tiptopDegree: '',\r\n              specialty: '',\r\n              school: '',\r\n              beginDate: '',\r\n              workState: '在职',\r\n              workID: '',\r\n              contractTerm: null,\r\n              conversionTime: '',\r\n              notWorkDate: null,\r\n              beginContract: '',\r\n              endContract: '',\r\n              workAge: null,\r\n              salaryId: null,\r\n            },\r\n            rules: {\r\n              name: [{required: true, message: '请输入员工姓名', trigger: 'blur'}],\r\n              gender: [{required: true, message: '请输入员工性别', trigger: 'blur'}],\r\n              birthday: [{required: true, message: '请输入员工出生日期', trigger: 'blur'}],\r\n              idCard: [{required: true, message: '请输入员工身份证号码', trigger: 'blur'},{pattern:/(^[1-9]\\d{5}(18|19|([23]\\d))\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$)|(^[1-9]\\d{5}\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{2}$)/, message: '身份证号码不正确', trigger: 'blur'}],\r\n              wedlock: [{required: true, message: '请输入员工婚姻状况', trigger: 'blur'}],\r\n              nationId: [{required: true, message: '请输入员工民族', trigger: 'blur'}],\r\n              nativePlace: [{required: true, message: '请输入员工籍贯', trigger: 'blur'}],\r\n              politicId: [{required: true, message: '请输入员工政治面貌', trigger: 'blur'}],\r\n              email: [{required: true, message: '请输入员工邮箱地址', trigger: 'blur'},{type: 'email', message: '邮箱地址格式不正确', trigger: 'blur'}],\r\n              phone: [{required: true, message: '请输入员工电话', trigger: 'blur'}],\r\n              address: [{required: true, message: '请输入员工地址', trigger: 'blur'}],\r\n              departmentId: [{required: true, message: '请输入员工部门', trigger: 'blur'}],\r\n              jobLevelId: [{required: true, message: '请输入员工职称', trigger: 'blur'}],\r\n              posId: [{required: true, message: '请输入员工职位', trigger: 'blur'}],\r\n              engageForm: [{required: true, message: '请输入员工聘用形式', trigger: 'blur'}],\r\n              tiptopDegree: [{required: true, message: '请输入员工学历', trigger: 'blur'}],\r\n              specialty: [{required: true, message: '请输入员工专业', trigger: 'blur'}],\r\n              school: [{required: true, message: '请输入员工毕业院校', trigger: 'blur'}],\r\n              beginDate: [{required: true, message: '请输入员工入职日期', trigger: 'blur'}],\r\n              workState: [{required: true, message: '请输入员工工作状态', trigger: 'blur'}],\r\n              workID: [{required: true, message: '请输入员工工号', trigger: 'blur'}],\r\n              contractTerm: [{required: true, message: '请输入员工合同期限', trigger: 'blur'}],\r\n              conversionTime: [{required: true, message: '请输入员工转正日期', trigger: 'blur'}],\r\n              notWorkDate: [{required: true, message: '请输入员工离职日期', trigger: 'blur'}],\r\n              beginContract: [{required: true, message: '请输入员工合同其实日期', trigger: 'blur'}],\r\n              endContract: [{required: true, message: '请输入员工合同结束日期', trigger: 'blur'}],\r\n              workAge: [{required: true, message: '请输入员工工龄', trigger: 'blur'}],\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        this.initEmps() \r\n        this.initData()\r\n        this.initPositions()\r\n    },\r\n    methods: {\r\n      cancelSearch(){\r\n        this.showAdvanceSearchVisible = !this.showAdvanceSearchVisible\r\n        this.initEmps()\r\n        this.loading = false\r\n      },\r\n      onSuccess() {\r\n        this.importDataBtnIcon = 'el-icon-upload2'\r\n        this.importDataBtnText = '导入数据'\r\n        this.initEmps()\r\n        this.importDataDisabled = false\r\n      },\r\n      onError() {\r\n        this.importDataBtnIcon = 'el-icon-upload2'\r\n        this.importDataBtnText = '导入数据'\r\n        this.importDataDisabled = false\r\n      },\r\n      beforeUpload() {\r\n        this.importDataBtnIcon = 'el-icon-loading'\r\n        this.importDataBtnText = '正在导入'\r\n        this.importDataDisabled = true\r\n      },\r\n      exportData() {\r\n        this.downloadRequest('/employee/basic/export').then(resp => {\r\n           // 将响应数据处理为Blob类型\r\n            var blob = new Blob([resp])\r\n            console.log(resp.data)\r\n            // 创建一个URL对象\r\n            var url = window.URL.createObjectURL(blob)\r\n            // 创建一个a标签\r\n            var a = document.createElement(\"a\")\r\n            a.href = url\r\n            a.download = \"员工数据.txt\"// 这里指定下载文件的文件名\r\n            a.click()\r\n            // 释放之前创建的URL对象\r\n            window.URL.revokeObjectURL(url)\r\n        }).catch(function (reason) {\r\n            console.log(reason)\r\n        })\r\n      },\r\n      cancel(){\r\n        this.dialogVisible = false\r\n        this.visible = false\r\n      },\r\n      showEditEmp(data) {\r\n        this.initPositions()\r\n        this.inputDepName = data.dname\r\n        this.title = '编辑员工信息'\r\n        this.emp = data\r\n        this.dialogVisible = true\r\n      },\r\n      doAddEmp() {\r\n        if (this.emp.id) {\r\n          this.$refs['empForm'].validate((valid) => {\r\n          if (valid) {\r\n            this.putRequest('/employee/basic', this.emp).then(resp => {\r\n              if (resp) {\r\n                this.dialogVisible = false\r\n                this.initEmps()\r\n              }\r\n            })\r\n          }\r\n        })\r\n        }else {\r\n          this.$refs['empForm'].validate((valid) => {\r\n          if (valid) {\r\n            this.postRequest('/employee/basic', this.emp).then(resp => {\r\n              if (resp) {\r\n                this.dialogVisible = false\r\n                this.initEmps()\r\n              }\r\n            })\r\n          }\r\n        })\r\n        }\r\n      },\r\n      handleNodeClick(data) {\r\n        this.inputDepName = data.name\r\n        this.emp.departmentId = data.id \r\n        this.visible = !this.visible\r\n      },\r\n      searchHandleNodeClick(data) {\r\n        this.inputDepName = data.name\r\n        this.searchValue.departmentId = data.id\r\n        this.visible2 = !this.visible2\r\n      },\r\n      showDepView() {\r\n        this.visible = !this.visible\r\n      },\r\n      showDepView2() {\r\n        this.visible2 = !this.visible2\r\n      },\r\n      getMaxWorkId() {\r\n        this.getRequest('/system/basic/workId').then(resp => {\r\n          if (resp) {\r\n            this.emp.workID = '00000'+resp.data\r\n          }\r\n        })\r\n      },\r\n      initPositions() {\r\n        this.getRequest('/system/basic/positions').then(resp => {\r\n            if (resp) {\r\n              this.positions = resp\r\n            }\r\n          })\r\n      },\r\n      initData() {\r\n        if (!window.sessionStorage.getItem('nations')) {\r\n          this.getRequest('/system/basic/nation').then(resp => {\r\n            if (resp) {\r\n              this.nations = resp\r\n              window.sessionStorage.setItem('nations', JSON.stringify(resp))\r\n            }\r\n          })\r\n        } else {\r\n          this.nations = JSON.parse(window.sessionStorage.getItem('nations'))\r\n        }\r\n        if (!window.sessionStorage.getItem('jobLevel')) {\r\n          this.getRequest('/system/basic/jobLevel').then(resp => {\r\n            if (resp) {\r\n              this.jobLevel = resp\r\n              window.sessionStorage.setItem('jobLevel', JSON.stringify(resp))\r\n            }\r\n          })\r\n        } else {\r\n          this.jobLevel = JSON.parse(window.sessionStorage.getItem('jobLevel'))\r\n        }\r\n        if (!window.sessionStorage.getItem('politicsstatus')) {\r\n          this.getRequest('/system/basic/politicsstatus').then(resp => {\r\n            if (resp) {\r\n              this.politicsstatus = resp\r\n              window.sessionStorage.setItem('politicsstatus', JSON.stringify(resp))\r\n            }\r\n          })\r\n        } else {\r\n          this.politicsstatus = JSON.parse(window.sessionStorage.getItem('politicsstatus'))\r\n        }\r\n        if (!window.sessionStorage.getItem('allDeps')) {\r\n          this.getRequest('/system/basic/department').then(resp => {\r\n            if (resp) {\r\n              this.allDeps = resp\r\n              window.sessionStorage.setItem('allDeps', JSON.stringify(resp))\r\n            }\r\n          })\r\n        } else {\r\n          this.allDeps = JSON.parse(window.sessionStorage.getItem('allDeps'))\r\n        }\r\n      },\r\n      showAddEmp() {\r\n        this.inputDepName = ''\r\n        this.title = '添加员工'\r\n        this.dialogVisible = true\r\n        this.emp = {\r\n              id: null,\r\n              name: '',\r\n              gender: '',\r\n              birthday: '',\r\n              idCard: '',\r\n              wedlock: '',\r\n              nationId:  null,\r\n              nativePlace: '',\r\n              politicId: null,\r\n              email: '',\r\n              phone: '',\r\n              address: '',\r\n              departmentId: null,\r\n              jobLevelId: null,\r\n              posId: '',\r\n              engageForm: '',\r\n              tiptopDegree: '',\r\n              specialty: '',\r\n              school: '',\r\n              beginDate: '',\r\n              workState: '在职',\r\n              workID: '',\r\n              contractTerm: null,\r\n              conversionTime: '',\r\n              notWorkDate: null,\r\n              beginContract: '',\r\n              endContract: '',\r\n              workAge: null,\r\n              salaryId: null,\r\n            }\r\n        this.initPositions()\r\n        this.getMaxWorkId()\r\n      },\r\n      sizeChange(size) {\r\n        this.size = size\r\n        this.initEmps()\r\n      },\r\n      currentChange(currentPage) {\r\n        this.page = currentPage\r\n        this.initEmps()\r\n      },\r\n      delEmp(data) {\r\n          this.$confirm('是否删除'+data.name+'--'+data.id+', 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.deleteRequest('/employee/basic', data).then(resp => {\r\n                    if (resp) {\r\n                        this.initEmps()\r\n                    }\r\n                })\r\n            }).catch(() => {\r\n            this.$message({\r\n                type: 'info',\r\n                message: '已取消删除'\r\n            })      \r\n            })\r\n        },  \r\n      initEmps() {\r\n          this.loading = true\r\n          let url = '/employee/basic/?currentPage='+this.page+'&size='+this.size\r\n            if (this.searchValue.politicId) {\r\n              url += '&politicId='+this.searchValue.politicId\r\n              this.searchValue.politicId = null\r\n            }\r\n            if (this.searchValue.nationId) {\r\n              url += '&nationId='+this.searchValue.nationId\r\n              this.searchValue.nationId = null\r\n            }\r\n            if (this.searchValue.posId) {\r\n              url += '&posId='+this.searchValue.posId\r\n              this.searchValue.posId = null\r\n            }\r\n            if (this.searchValue.jobLevelId) {\r\n              url += '&jobLevelId='+this.searchValue.jobLevelId\r\n              this.searchValue.jobLevelId = null\r\n            }\r\n            if (this.searchValue.engageForm) {\r\n              url += '&engageForm='+this.searchValue.engageForm\r\n              this.searchValue.engageForm = null\r\n            }\r\n            if (this.searchValue.departmentId) {\r\n              url += '&departmentId='+this.searchValue.departmentId\r\n              this.searchValue.departmentId = null\r\n            }\r\n            if (this.searchValue.beginDateScope) {\r\n              url += '&beginDateScope='+this.searchValue.beginDateScope\r\n              this.searchValue.beginDateScope = null\r\n            }else{\r\n              url += '&name='+this.empName\r\n          }\r\n            this.getRequest(url).then(resp => {\r\n              this.loading = false  \r\n              if (resp) {\r\n                    this.emps = resp.data\r\n                    this.total = resp.total\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n  .slide-fade-enter-active {\r\n  transition: all .3s ease;\r\n}\r\n.slide-fade-leave-active {\r\n  transition: all .2s cubic-bezier(1.0, 0.5, 0.8, 1.0);\r\n}\r\n    .slide-fade-enter, .slide-fade-leave-to\r\n/* .slide-fade-leave-active for below version 2.1.8 */ {\r\n  transform: translateX(10px);\r\n  opacity: 0;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}