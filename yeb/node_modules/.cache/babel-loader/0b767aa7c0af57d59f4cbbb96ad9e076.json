{"ast":null,"code":"export default {\n  name: 'Login',\n\n  data() {\n    return {\n      captchaUrl: '',\n      loginForm: {\n        username: 'admin',\n        password: '123'\n        /* code: '' */\n\n      },\n      checked: true,\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }],\n        code: [{\n          required: true,\n          message: '请输入验证码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  methods: {\n    updateCaptcha() {\n      this.captchaUrl = '';\n    },\n\n    submitLogin() {\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          this.postRequest('/login', this.loginForm).then(resp => {\n            if (resp) {\n              const tokenStr = resp.token;\n              window.sessionStorage.setItem('tokenStr', tokenStr);\n              console.log('登录'); // 页面跳转\n\n              const path = this.$route.query.redirect;\n              this.$router.replace(path == '/' || path == undefined ? '/home' : path);\n            }\n          });\n        } else {\n          this.$message.error('请输入所需字段！');\n          return false;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAyBA;EACAA,aADA;;EAEAC;IACA;MACAC,cADA;MAEAC;QACAC,iBADA;QAEAC;QACA;;MAHA,CAFA;MAOAC,aAPA;MAQAC;QACAH;UAAAI;UAAAC;UAAAC;QAAA,EADA;QAEAL;UAAAG;UAAAC;UAAAC;QAAA,EAFA;QAGAC;UAAAH;UAAAC;UAAAC;QAAA;MAHA;IARA;EAcA,CAjBA;;EAmBAE;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;QACA;UACA;YACA;cACA;cACAC;cACAC,kBAHA,CAIA;;cACA;cACA;YACA;UACA,CATA;QAUA,CAXA,MAWA;UACA;UACA;QACA;MACA,CAhBA;IAiBA;;EAtBA;AAnBA","names":["name","data","captchaUrl","loginForm","username","password","checked","rules","required","message","trigger","code","methods","updateCaptcha","submitLogin","window","console"],"sourceRoot":"src/views","sources":["Login.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-form :rules=\"rules\" :model=\"loginForm\" ref=\"loginForm\" class=\"loginContainer\">\r\n            <h3 class=\"loginTitle\">系统登录</h3>\r\n            <el-form-item prop=\"username\">\r\n                <el-input type=\"text\" v-model=\"loginForm.username\" placeholder=\"请输入用户名\" auto-complete=\"false\">\r\n                </el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"password\">\r\n                <el-input type=\"password\" v-model=\"loginForm.password\" placeholder=\"请输入密码\" auto-complete=\"false\">\r\n                </el-input>\r\n            </el-form-item>\r\n            <!-- <el-form-item prop=\"code\">\r\n                <el-input type=\"text\" v-model=\"loginForm.code\" placeholder=\"点击图片更换验证码\" auto-complete=\"false\"\r\n                    style=\"width: 200px; margin-right: 10px;\"></el-input>\r\n                <img :src=\"captchaUrl\" @click=\"updateCaptcha\">\r\n            </el-form-item> -->\r\n            <el-checkbox type=\"checked\" v-model=\"checked\" class=\"rememberMe\">记住我</el-checkbox>\r\n            <el-button type=\"primary\" style=\"width: 100%\" @click=\"submitLogin\">登录</el-button>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    name: 'Login',\r\n    data() {\r\n        return {\r\n            captchaUrl: '',\r\n            loginForm: {\r\n                username: 'admin',\r\n                password: '123',\r\n                /* code: '' */\r\n            },\r\n            checked: true,\r\n            rules: {\r\n                username: [{ required: true, message: '请输入用户名', trigger: 'blur' }],\r\n                password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\r\n                code: [{ required: true, message: '请输入验证码', trigger: 'blur' }]\r\n            }\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        updateCaptcha() {\r\n            this.captchaUrl = ''\r\n        },\r\n        submitLogin() {\r\n            this.$refs.loginForm.validate((valid) => {\r\n                if (valid) {\r\n                    this.postRequest('/login', this.loginForm).then(resp => {\r\n                        if (resp) {\r\n                            const tokenStr = resp.token\r\n                            window.sessionStorage.setItem('tokenStr', tokenStr)\r\n                            console.log('登录')\r\n                            // 页面跳转\r\n                            const path = this.$route.query.redirect\r\n                            this.$router.replace((path ==  '/' || path == undefined)? '/home' : path)\r\n                        }\r\n                    })\r\n                } else {\r\n                    this.$message.error('请输入所需字段！')\r\n                    return false\r\n                }\r\n            })\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.loginContainer {\r\n    border-radius: 15px;\r\n    background-clip: border-box;\r\n    margin: 180px auto;\r\n    width: 350px;\r\n    padding: 15px 35px;\r\n    background: #fff;\r\n    border: 1px solid skyblue;\r\n    box-shadow: 0 0 25px #cac6c6;\r\n}\r\n\r\n.loginTitle {\r\n    margin: 0 auto 30px auto;\r\n    text-align: center;\r\n}\r\n\r\n.rememberMe {\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.el-form-item__content {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}