{"ast":null,"code":"import Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport store from './store/index.js';\nimport { initMenu } from './utils/menus';\nimport 'font-awesome/css/font-awesome.css';\nimport { getRequest } from './utils/api';\nimport { putRequest } from './utils/api';\nimport { postRequest } from './utils/api';\nimport { deleteRequest } from './utils/api';\nimport { downloadRequest } from './utils/download';\nVue.config.productionTip = false;\nVue.use(ElementUI);\nVue.prototype.postRequest = postRequest;\nVue.prototype.putRequest = putRequest;\nVue.prototype.getRequest = getRequest;\nVue.prototype.deleteRequest = deleteRequest;\nVue.prototype.downloadRequest = downloadRequest;\nrouter.beforeEach((to, from, next) => {\n  console.log(from.path);\n  console.log(to.path);\n\n  if (window.sessionStorage.getItem('tokenStr')) {\n    if (to.path != '/login') {\n      initMenu(router, store);\n    }\n\n    if (!window.sessionStorage.getItem('user')) {\n      return getRequest('/admin/info').then(resp => {\n        if (resp) {\n          window.sessionStorage.setItem('user', JSON.stringify(resp));\n          next();\n        }\n      });\n    }\n\n    next();\n  } else {\n    if (to.path == '/login' || to.path == '/') {\n      next();\n    } else {\n      next('/?redirect=' + to.path);\n    }\n  }\n});\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app');","map":{"version":3,"names":["Vue","App","router","ElementUI","store","initMenu","getRequest","putRequest","postRequest","deleteRequest","downloadRequest","config","productionTip","use","prototype","beforeEach","to","from","next","console","log","path","window","sessionStorage","getItem","then","resp","setItem","JSON","stringify","render","h","$mount"],"sources":["E:/web-code/yeb/src/main.js"],"sourcesContent":["import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport ElementUI from 'element-ui'\r\nimport 'element-ui/lib/theme-chalk/index.css'\r\nimport store from './store/index.js'\r\nimport { initMenu } from './utils/menus'\r\nimport 'font-awesome/css/font-awesome.css'\r\nimport { getRequest } from './utils/api'\r\nimport { putRequest } from './utils/api'\r\nimport { postRequest } from './utils/api'\r\nimport { deleteRequest } from './utils/api'\r\nimport { downloadRequest } from './utils/download'\r\n\r\nVue.config.productionTip = false\r\nVue.use(ElementUI);\r\n\r\nVue.prototype.postRequest = postRequest\r\nVue.prototype.putRequest = putRequest\r\nVue.prototype.getRequest = getRequest\r\nVue.prototype.deleteRequest = deleteRequest\r\nVue.prototype.downloadRequest = downloadRequest\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  console.log(from.path)\r\n  console.log(to.path)\r\n  if (window.sessionStorage.getItem('tokenStr')) {\r\n    if (to.path != '/login') {\r\n      initMenu(router, store)\r\n    }\r\n    if (!window.sessionStorage.getItem('user')) {\r\n      return getRequest('/admin/info').then(resp => {\r\n        if (resp) {\r\n          window.sessionStorage.setItem('user', JSON.stringify(resp))\r\n          next()\r\n        }\r\n      })\r\n    }\r\n    next()\r\n  } else {\r\n    if (to.path == '/login' || to.path == '/') {\r\n      next()\r\n    } else {\r\n      next('/?redirect=' + to.path)\r\n    }\r\n  }\r\n})\r\n\r\nnew Vue({\r\n  router,\r\n  store,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAO,sCAAP;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,SAASC,QAAT,QAAyB,eAAzB;AACA,OAAO,mCAAP;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,aAAT,QAA8B,aAA9B;AACA,SAASC,eAAT,QAAgC,kBAAhC;AAEAV,GAAG,CAACW,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AACAZ,GAAG,CAACa,GAAJ,CAAQV,SAAR;AAEAH,GAAG,CAACc,SAAJ,CAAcN,WAAd,GAA4BA,WAA5B;AACAR,GAAG,CAACc,SAAJ,CAAcP,UAAd,GAA2BA,UAA3B;AACAP,GAAG,CAACc,SAAJ,CAAcR,UAAd,GAA2BA,UAA3B;AACAN,GAAG,CAACc,SAAJ,CAAcL,aAAd,GAA8BA,aAA9B;AACAT,GAAG,CAACc,SAAJ,CAAcJ,eAAd,GAAgCA,eAAhC;AAEAR,MAAM,CAACa,UAAP,CAAkB,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,KAAoB;EACpCC,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACI,IAAjB;EACAF,OAAO,CAACC,GAAR,CAAYJ,EAAE,CAACK,IAAf;;EACA,IAAIC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,UAA9B,CAAJ,EAA+C;IAC7C,IAAIR,EAAE,CAACK,IAAH,IAAW,QAAf,EAAyB;MACvBhB,QAAQ,CAACH,MAAD,EAASE,KAAT,CAAR;IACD;;IACD,IAAI,CAACkB,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,MAA9B,CAAL,EAA4C;MAC1C,OAAOlB,UAAU,CAAC,aAAD,CAAV,CAA0BmB,IAA1B,CAA+BC,IAAI,IAAI;QAC5C,IAAIA,IAAJ,EAAU;UACRJ,MAAM,CAACC,cAAP,CAAsBI,OAAtB,CAA8B,MAA9B,EAAsCC,IAAI,CAACC,SAAL,CAAeH,IAAf,CAAtC;UACAR,IAAI;QACL;MACF,CALM,CAAP;IAMD;;IACDA,IAAI;EACL,CAbD,MAaO;IACL,IAAIF,EAAE,CAACK,IAAH,IAAW,QAAX,IAAuBL,EAAE,CAACK,IAAH,IAAW,GAAtC,EAA2C;MACzCH,IAAI;IACL,CAFD,MAEO;MACLA,IAAI,CAAC,gBAAgBF,EAAE,CAACK,IAApB,CAAJ;IACD;EACF;AACF,CAvBD;AAyBA,IAAIrB,GAAJ,CAAQ;EACNE,MADM;EAENE,KAFM;EAGN0B,MAAM,EAAEC,CAAC,IAAIA,CAAC,CAAC9B,GAAD;AAHR,CAAR,EAIG+B,MAJH,CAIU,MAJV"},"metadata":{},"sourceType":"module"}